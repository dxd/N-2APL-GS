\documentclass[11pt]{article}\usepackage[utf8]{inputenc}\usepackage{geometry}
\geometry{a4paper}\usepackage{graphicx} \usepackage{booktabs}
\usepackage{array}
\usepackage{paralist}
\usepackage{verbatim}

\usepackage{listings} 
\usepackage{subfig}
\usepackage{fancyhdr}
\pagestyle{fancy}
\renewcommand{\headrulewidth}{0pt}
\lhead{}\chead{}\rhead{}
\lfoot{}\cfoot{\thepage}\rfoot{}
\usepackage{sectsty}
\allsectionsfont{\sffamily\mdseries\upshape}
\usepackage[nottoc,notlof,notlot]{tocbibind}
\usepackage[titles,subfigure]{tocloft} 
\renewcommand{\cftsecfont}{\rmfamily\mdseries\upshape}
\renewcommand{\cftsecpagefont}{\rmfamily\mdseries\upshape}
\usepackage{hyperref} 
\title{2OPL Organization log}
\author{2OPL interpreter}
\begin{document}
\maketitle
\tableofcontents

\section{Event history}

\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
0&\texttt{cargo(cell(19.0,19.0),0.0)}&true&2013-07-03 16:58:37\\ [1ex] \hline
1&\texttt{coin(cell(8.0,6.0),0.0,a1)}&true&2013-07-03 16:58:38\\ [1ex] \hline
2&\texttt{position(a1,cell(3.0,4.0),0.0)}&true&2013-07-03 16:58:38\\ [1ex] \hline
3&\texttt{coin(cell(16.0,16.0),0.0,a2)}&true&2013-07-03 16:58:39\\ [1ex] \hline
4&\texttt{position(t1,cell(18.0,19.0),0.0)}&true&2013-07-03 16:58:39\\ [1ex] \hline
5&\texttt{position(a1,cell(3.0,5.0),0.0)}&true&2013-07-03 16:58:39\\ [1ex] \hline
6&\texttt{coin(cell(2.0,2.0),0.0,a3)}&true&2013-07-03 16:58:39\\ [1ex] \hline
7&\texttt{position(t1,cell(17.0,19.0),0.0)}&true&2013-07-03 16:58:39\\ [1ex] \hline
8&\texttt{position(a1,cell(4.0,5.0),0.0)}&true&2013-07-03 16:58:39\\ [1ex] \hline
9&\texttt{position(t1,cell(16.0,19.0),0.0)}&true&2013-07-03 16:58:40\\ [1ex] \hline
10&\texttt{position(a1,cell(5.0,5.0),0.0)}&true&2013-07-03 16:58:40\\ [1ex] \hline
11&\texttt{position(a2,cell(7.0,19.0),0.0)}&true&2013-07-03 16:58:40\\ [1ex] \hline
12&\texttt{position(a3,cell(10.0,4.0),0.0)}&true&2013-07-03 16:58:40\\ [1ex] \hline
13&\texttt{position(t1,cell(15.0,19.0),0.0)}&true&2013-07-03 16:58:40\\ [1ex] \hline
14&\texttt{position(a2,cell(6.0,19.0),0.0)}&true&2013-07-03 16:58:40\\ [1ex] \hline
15&\texttt{position(a3,cell(9.0,4.0),0.0)}&true&2013-07-03 16:58:40\\ [1ex] \hline
16&\texttt{position(t1,cell(14.0,19.0),0.0)}&true&2013-07-03 16:58:40\\ [1ex] \hline
17&\texttt{position(a1,cell(4.0,5.0),0.0)}&true&2013-07-03 16:58:41\\ [1ex] \hline
18&\texttt{position(a2,cell(5.0,19.0),0.0)}&true&2013-07-03 16:58:41\\ [1ex] \hline
19&\texttt{position(a3,cell(8.0,4.0),0.0)}&true&2013-07-03 16:58:41\\ [1ex] \hline
20&\texttt{position(t1,cell(13.0,19.0),0.0)}&true&2013-07-03 16:58:41\\ [1ex] \hline
21&\texttt{position(a1,cell(3.0,5.0),0.0)}&true&2013-07-03 16:58:41\\ [1ex] \hline
22&\texttt{position(a2,cell(4.0,19.0),0.0)}&true&2013-07-03 16:58:41\\ [1ex] \hline
23&\texttt{position(a3,cell(7.0,4.0),0.0)}&true&2013-07-03 16:58:41\\ [1ex] \hline
24&\texttt{position(t1,cell(12.0,19.0),0.0)}&true&2013-07-03 16:58:41\\ [1ex] \hline
25&\texttt{position(a1,cell(2.0,5.0),0.0)}&true&2013-07-03 16:58:41\\ [1ex] \hline
26&\texttt{position(a2,cell(3.0,19.0),0.0)}&true&2013-07-03 16:58:42\\ [1ex] \hline
27&\texttt{position(a3,cell(6.0,4.0),0.0)}&true&2013-07-03 16:58:42\\ [1ex] \hline
28&\texttt{position(t1,cell(11.0,19.0),0.0)}&true&2013-07-03 16:58:42\\ [1ex] \hline
29&\texttt{position(a1,cell(2.0,4.0),0.0)}&true&2013-07-03 16:58:42\\ [1ex] \hline
30&\texttt{position(a2,cell(2.0,19.0),0.0)}&true&2013-07-03 16:58:42\\ [1ex] \hline
31&\texttt{position(a3,cell(5.0,4.0),0.0)}&true&2013-07-03 16:58:42\\ [1ex] \hline
32&\texttt{position(t1,cell(10.0,19.0),0.0)}&true&2013-07-03 16:58:42\\ [1ex] \hline
33&\texttt{position(a1,cell(2.0,3.0),0.0)}&true&2013-07-03 16:58:42\\ [1ex] \hline
34&\texttt{position(a2,cell(2.0,18.0),0.0)}&true&2013-07-03 16:58:42\\ [1ex] \hline
35&\texttt{position(t1,cell(9.0,19.0),0.0)}&true&2013-07-03 16:58:43\\ [1ex] \hline
36&\texttt{position(a3,cell(4.0,4.0),0.0)}&true&2013-07-03 16:58:43\\ [1ex] \hline
37&\texttt{position(a1,cell(2.0,2.0),0.0)}&true&2013-07-03 16:58:43\\ [1ex] \hline
38&\texttt{position(a2,cell(2.0,17.0),0.0)}&true&2013-07-03 16:58:43\\ [1ex] \hline
39&\texttt{position(t1,cell(8.0,19.0),0.0)}&true&2013-07-03 16:58:43\\ [1ex] \hline
40&\texttt{position(a3,cell(3.0,4.0),0.0)}&true&2013-07-03 16:58:43\\ [1ex] \hline
41&\texttt{position(a2,cell(2.0,16.0),0.0)}&true&2013-07-03 16:58:43\\ [1ex] \hline
42&\texttt{position(t1,cell(7.0,19.0),0.0)}&true&2013-07-03 16:58:43\\ [1ex] \hline
43&\texttt{position(a3,cell(2.0,4.0),0.0)}&true&2013-07-03 16:58:43\\ [1ex] \hline
44&\texttt{position(a1,cell(2.0,3.0),0.0)}&true&2013-07-03 16:58:43\\ [1ex] \hline
45&\texttt{position(a2,cell(2.0,15.0),0.0)}&true&2013-07-03 16:58:44\\ [1ex] \hline
46&\texttt{position(t1,cell(6.0,19.0),0.0)}&true&2013-07-03 16:58:44\\ [1ex] \hline
47&\texttt{position(a3,cell(2.0,3.0),0.0)}&true&2013-07-03 16:58:44\\ [1ex] \hline
48&\texttt{position(a1,cell(2.0,4.0),0.0)}&true&2013-07-03 16:58:44\\ [1ex] \hline
49&\texttt{position(a2,cell(2.0,14.0),0.0)}&true&2013-07-03 16:58:44\\ [1ex] \hline
50&\texttt{position(t1,cell(5.0,19.0),0.0)}&true&2013-07-03 16:58:44\\ [1ex] \hline
51&\texttt{position(a3,cell(2.0,2.0),0.0)}&true&2013-07-03 16:58:44\\ [1ex] \hline
52&\texttt{position(a1,cell(2.0,5.0),0.0)}&true&2013-07-03 16:58:44\\ [1ex] \hline
53&\texttt{position(a2,cell(2.0,13.0),0.0)}&true&2013-07-03 16:58:44\\ [1ex] \hline
54&\texttt{position(t1,cell(4.0,19.0),0.0)}&true&2013-07-03 16:58:44\\ [1ex] \hline
55&\texttt{position(a3,cell(11.0,4.0),0.0)}&true&2013-07-03 16:58:45\\ [1ex] \hline
56&\texttt{position(a1,cell(2.0,6.0),0.0)}&true&2013-07-03 16:58:45\\ [1ex] \hline
57&\texttt{position(a2,cell(2.0,12.0),0.0)}&true&2013-07-03 16:58:45\\ [1ex] \hline
58&\texttt{position(t1,cell(3.0,19.0),0.0)}&true&2013-07-03 16:58:45\\ [1ex] \hline
59&\texttt{position(a3,cell(2.0,3.0),0.0)}&true&2013-07-03 16:58:45\\ [1ex] \hline
60&\texttt{position(a1,cell(2.0,7.0),0.0)}&true&2013-07-03 16:58:45\\ [1ex] \hline
61&\texttt{position(a2,cell(2.0,11.0),0.0)}&true&2013-07-03 16:58:45\\ [1ex] \hline
62&\texttt{position(t1,cell(2.0,19.0),0.0)}&true&2013-07-03 16:58:45\\ [1ex] \hline
63&\texttt{position(a3,cell(2.0,4.0),0.0)}&true&2013-07-03 16:58:45\\ [1ex] \hline
64&\texttt{position(a1,cell(2.0,8.0),0.0)}&true&2013-07-03 16:58:46\\ [1ex] \hline
65&\texttt{position(a2,cell(2.0,10.0),0.0)}&true&2013-07-03 16:58:46\\ [1ex] \hline
66&\texttt{position(t1,cell(2.0,18.0),0.0)}&true&2013-07-03 16:58:46\\ [1ex] \hline
67&\texttt{position(a3,cell(2.0,5.0),0.0)}&true&2013-07-03 16:58:46\\ [1ex] \hline
68&\texttt{position(a1,cell(2.0,9.0),0.0)}&true&2013-07-03 16:58:46\\ [1ex] \hline
69&\texttt{position(a2,cell(2.0,9.0),0.0)}&true&2013-07-03 16:58:47\\ [1ex] \hline
70&\texttt{position(t1,cell(2.0,17.0),0.0)}&true&2013-07-03 16:58:47\\ [1ex] \hline
71&\texttt{position(a3,cell(2.0,6.0),0.0)}&true&2013-07-03 16:58:47\\ [1ex] \hline
72&\texttt{position(a1,cell(2.0,10.0),0.0)}&true&2013-07-03 16:58:47\\ [1ex] \hline
73&\texttt{position(a2,cell(2.0,8.0),0.0)}&true&2013-07-03 16:58:47\\ [1ex] \hline
74&\texttt{position(t1,cell(2.0,16.0),0.0)}&true&2013-07-03 16:58:47\\ [1ex] \hline
75&\texttt{position(a3,cell(2.0,7.0),0.0)}&true&2013-07-03 16:58:47\\ [1ex] \hline
76&\texttt{position(a1,cell(2.0,11.0),0.0)}&true&2013-07-03 16:58:47\\ [1ex] \hline
77&\texttt{position(t1,cell(2.0,15.0),0.0)}&true&2013-07-03 16:58:47\\ [1ex] \hline
78&\texttt{position(a2,cell(2.0,7.0),0.0)}&true&2013-07-03 16:58:47\\ [1ex] \hline
79&\texttt{position(a3,cell(2.0,8.0),0.0)}&true&2013-07-03 16:58:47\\ [1ex] \hline
80&\texttt{position(a1,cell(2.0,12.0),0.0)}&true&2013-07-03 16:58:48\\ [1ex] \hline
81&\texttt{position(t1,cell(2.0,14.0),0.0)}&true&2013-07-03 16:58:48\\ [1ex] \hline
82&\texttt{position(a2,cell(2.0,6.0),0.0)}&true&2013-07-03 16:58:48\\ [1ex] \hline
83&\texttt{position(a3,cell(2.0,9.0),0.0)}&true&2013-07-03 16:58:48\\ [1ex] \hline
84&\texttt{position(a1,cell(2.0,13.0),0.0)}&true&2013-07-03 16:58:48\\ [1ex] \hline
85&\texttt{position(t1,cell(2.0,13.0),0.0)}&true&2013-07-03 16:58:48\\ [1ex] \hline
86&\texttt{position(a2,cell(2.0,5.0),0.0)}&true&2013-07-03 16:58:48\\ [1ex] \hline
87&\texttt{position(a3,cell(2.0,10.0),0.0)}&true&2013-07-03 16:58:48\\ [1ex] \hline
88&\texttt{position(a1,cell(2.0,14.0),0.0)}&true&2013-07-03 16:58:48\\ [1ex] \hline
89&\texttt{position(t1,cell(2.0,12.0),0.0)}&true&2013-07-03 16:58:49\\ [1ex] \hline
90&\texttt{position(a2,cell(2.0,4.0),0.0)}&true&2013-07-03 16:58:49\\ [1ex] \hline
91&\texttt{position(a3,cell(2.0,11.0),0.0)}&true&2013-07-03 16:58:49\\ [1ex] \hline
92&\texttt{position(a1,cell(2.0,15.0),0.0)}&true&2013-07-03 16:58:49\\ [1ex] \hline
93&\texttt{position(t1,cell(2.0,11.0),0.0)}&true&2013-07-03 16:58:49\\ [1ex] \hline
94&\texttt{position(a2,cell(2.0,3.0),0.0)}&true&2013-07-03 16:58:49\\ [1ex] \hline
95&\texttt{position(a3,cell(2.0,12.0),0.0)}&true&2013-07-03 16:58:49\\ [1ex] \hline
96&\texttt{position(a1,cell(2.0,16.0),0.0)}&true&2013-07-03 16:58:49\\ [1ex] \hline
97&\texttt{position(t1,cell(2.0,10.0),0.0)}&true&2013-07-03 16:58:50\\ [1ex] \hline
98&\texttt{position(a2,cell(2.0,2.0),0.0)}&true&2013-07-03 16:58:50\\ [1ex] \hline
99&\texttt{position(a3,cell(2.0,13.0),0.0)}&true&2013-07-03 16:58:50\\ [1ex] \hline
100&\texttt{position(a1,cell(3.0,16.0),0.0)}&true&2013-07-03 16:58:50\\ [1ex] \hline
101&\texttt{position(t1,cell(2.0,9.0),0.0)}&true&2013-07-03 16:58:50\\ [1ex] \hline
102&\texttt{position(a3,cell(2.0,14.0),0.0)}&true&2013-07-03 16:58:50\\ [1ex] \hline
103&\texttt{position(a2,cell(9.0,19.0),0.0)}&true&2013-07-03 16:58:50\\ [1ex] \hline
104&\texttt{position(a1,cell(4.0,16.0),0.0)}&true&2013-07-03 16:58:50\\ [1ex] \hline
105&\texttt{position(t1,cell(2.0,8.0),0.0)}&true&2013-07-03 16:58:50\\ [1ex] \hline
106&\texttt{position(a3,cell(2.0,15.0),0.0)}&true&2013-07-03 16:58:50\\ [1ex] \hline
107&\texttt{position(a2,cell(10.0,19.0),0.0)}&true&2013-07-03 16:58:50\\ [1ex] \hline
108&\texttt{position(a1,cell(5.0,16.0),0.0)}&true&2013-07-03 16:58:51\\ [1ex] \hline
109&\texttt{position(t1,cell(2.0,7.0),0.0)}&true&2013-07-03 16:58:51\\ [1ex] \hline
110&\texttt{position(a3,cell(2.0,16.0),0.0)}&true&2013-07-03 16:58:51\\ [1ex] \hline
111&\texttt{position(a2,cell(11.0,19.0),0.0)}&true&2013-07-03 16:58:51\\ [1ex] \hline
112&\texttt{position(a1,cell(6.0,16.0),0.0)}&true&2013-07-03 16:58:51\\ [1ex] \hline
113&\texttt{position(t1,cell(2.0,6.0),0.0)}&true&2013-07-03 16:58:51\\ [1ex] \hline
114&\texttt{position(a3,cell(3.0,16.0),0.0)}&true&2013-07-03 16:58:51\\ [1ex] \hline
115&\texttt{position(a2,cell(12.0,19.0),0.0)}&true&2013-07-03 16:58:51\\ [1ex] \hline
116&\texttt{position(a1,cell(7.0,16.0),0.0)}&true&2013-07-03 16:58:51\\ [1ex] \hline
117&\texttt{position(t1,cell(2.0,5.0),0.0)}&true&2013-07-03 16:58:52\\ [1ex] \hline
118&\texttt{position(a3,cell(4.0,16.0),0.0)}&true&2013-07-03 16:58:52\\ [1ex] \hline
119&\texttt{position(a2,cell(13.0,19.0),0.0)}&true&2013-07-03 16:58:52\\ [1ex] \hline
120&\texttt{position(a1,cell(8.0,16.0),0.0)}&true&2013-07-03 16:58:52\\ [1ex] \hline
121&\texttt{position(t1,cell(2.0,4.0),0.0)}&true&2013-07-03 16:58:52\\ [1ex] \hline
122&\texttt{position(a3,cell(5.0,16.0),0.0)}&true&2013-07-03 16:58:52\\ [1ex] \hline
123&\texttt{position(a2,cell(14.0,19.0),0.0)}&true&2013-07-03 16:58:52\\ [1ex] \hline
124&\texttt{position(a1,cell(9.0,16.0),0.0)}&true&2013-07-03 16:58:52\\ [1ex] \hline
125&\texttt{position(t1,cell(2.0,3.0),0.0)}&true&2013-07-03 16:58:52\\ [1ex] \hline
126&\texttt{position(a3,cell(6.0,16.0),0.0)}&true&2013-07-03 16:58:53\\ [1ex] \hline
127&\texttt{position(a2,cell(15.0,19.0),0.0)}&true&2013-07-03 16:58:53\\ [1ex] \hline
128&\texttt{position(a1,cell(10.0,16.0),0.0)}&true&2013-07-03 16:58:53\\ [1ex] \hline
129&\texttt{position(t1,cell(2.0,2.0),0.0)}&true&2013-07-03 16:58:53\\ [1ex] \hline
130&\texttt{position(a3,cell(7.0,16.0),0.0)}&true&2013-07-03 16:58:53\\ [1ex] \hline
131&\texttt{position(a2,cell(16.0,19.0),0.0)}&true&2013-07-03 16:58:53\\ [1ex] \hline
132&\texttt{position(a1,cell(11.0,16.0),0.0)}&true&2013-07-03 16:58:53\\ [1ex] \hline
133&\texttt{position(a3,cell(8.0,16.0),0.0)}&true&2013-07-03 16:58:53\\ [1ex] \hline
134&\texttt{position(a2,cell(16.0,18.0),0.0)}&true&2013-07-03 16:58:53\\ [1ex] \hline
135&\texttt{position(a1,cell(12.0,16.0),0.0)}&true&2013-07-03 16:58:54\\ [1ex] \hline
136&\texttt{position(a3,cell(9.0,16.0),0.0)}&true&2013-07-03 16:58:54\\ [1ex] \hline
137&\texttt{position(a2,cell(16.0,17.0),0.0)}&true&2013-07-03 16:58:54\\ [1ex] \hline
138&\texttt{position(a1,cell(13.0,16.0),0.0)}&true&2013-07-03 16:58:54\\ [1ex] \hline
139&\texttt{position(a3,cell(10.0,16.0),0.0)}&true&2013-07-03 16:58:54\\ [1ex] \hline
140&\texttt{position(a2,cell(16.0,16.0),0.0)}&true&2013-07-03 16:58:54\\ [1ex] \hline
141&\texttt{position(a1,cell(14.0,16.0),0.0)}&true&2013-07-03 16:58:54\\ [1ex] \hline
142&\texttt{position(a3,cell(11.0,16.0),0.0)}&true&2013-07-03 16:58:54\\ [1ex] \hline
143&\texttt{position(a2,cell(8.0,19.0),0.0)}&true&2013-07-03 16:58:54\\ [1ex] \hline
144&\texttt{position(a1,cell(15.0,16.0),0.0)}&true&2013-07-03 16:58:55\\ [1ex] \hline
145&\texttt{position(a3,cell(12.0,16.0),0.0)}&true&2013-07-03 16:58:55\\ [1ex] \hline
146&\texttt{position(a2,cell(15.0,16.0),0.0)}&true&2013-07-03 16:58:55\\ [1ex] \hline
147&\texttt{position(a1,cell(16.0,16.0),0.0)}&true&2013-07-03 16:58:55\\ [1ex] \hline
148&\texttt{position(a3,cell(13.0,16.0),0.0)}&true&2013-07-03 16:58:55\\ [1ex] \hline
149&\texttt{position(a2,cell(14.0,16.0),0.0)}&true&2013-07-03 16:58:55\\ [1ex] \hline
150&\texttt{position(a3,cell(14.0,16.0),0.0)}&true&2013-07-03 16:58:55\\ [1ex] \hline
151&\texttt{position(a2,cell(13.0,16.0),0.0)}&true&2013-07-03 16:58:55\\ [1ex] \hline
152&\texttt{position(a1,cell(15.0,16.0),0.0)}&true&2013-07-03 16:58:55\\ [1ex] \hline
153&\texttt{position(a3,cell(15.0,16.0),0.0)}&true&2013-07-03 16:58:56\\ [1ex] \hline
154&\texttt{position(a2,cell(12.0,16.0),0.0)}&true&2013-07-03 16:58:56\\ [1ex] \hline
155&\texttt{position(a1,cell(14.0,16.0),0.0)}&true&2013-07-03 16:58:56\\ [1ex] \hline
156&\texttt{position(a3,cell(16.0,16.0),0.0)}&true&2013-07-03 16:58:56\\ [1ex] \hline
157&\texttt{position(a2,cell(11.0,16.0),0.0)}&true&2013-07-03 16:58:56\\ [1ex] \hline
158&\texttt{position(a1,cell(13.0,16.0),0.0)}&true&2013-07-03 16:58:56\\ [1ex] \hline
159&\texttt{position(a3,cell(11.0,3.0),0.0)}&true&2013-07-03 16:58:57\\ [1ex] \hline
160&\texttt{position(a2,cell(10.0,16.0),0.0)}&true&2013-07-03 16:58:57\\ [1ex] \hline
161&\texttt{position(a1,cell(12.0,16.0),0.0)}&true&2013-07-03 16:58:57\\ [1ex] \hline
162&\texttt{position(a3,cell(15.0,16.0),0.0)}&true&2013-07-03 16:58:57\\ [1ex] \hline
163&\texttt{position(a2,cell(9.0,16.0),0.0)}&true&2013-07-03 16:58:57\\ [1ex] \hline
164&\texttt{position(a1,cell(11.0,16.0),0.0)}&true&2013-07-03 16:58:58\\ [1ex] \hline
165&\texttt{position(a3,cell(14.0,16.0),0.0)}&true&2013-07-03 16:58:58\\ [1ex] \hline
166&\texttt{position(a2,cell(8.0,16.0),0.0)}&true&2013-07-03 16:58:58\\ [1ex] \hline
167&\texttt{position(a1,cell(10.0,16.0),0.0)}&true&2013-07-03 16:58:58\\ [1ex] \hline
168&\texttt{position(a3,cell(13.0,16.0),0.0)}&true&2013-07-03 16:58:58\\ [1ex] \hline
169&\texttt{position(a2,cell(8.0,15.0),0.0)}&true&2013-07-03 16:58:59\\ [1ex] \hline
170&\texttt{position(a1,cell(9.0,16.0),0.0)}&true&2013-07-03 16:58:59\\ [1ex] \hline
171&\texttt{position(a3,cell(12.0,16.0),0.0)}&true&2013-07-03 16:58:59\\ [1ex] \hline
172&\texttt{position(a2,cell(8.0,14.0),0.0)}&true&2013-07-03 16:58:59\\ [1ex] \hline
173&\texttt{position(a1,cell(8.0,16.0),0.0)}&true&2013-07-03 16:58:59\\ [1ex] \hline
174&\texttt{position(a3,cell(11.0,16.0),0.0)}&true&2013-07-03 16:58:59\\ [1ex] \hline
175&\texttt{position(a2,cell(8.0,13.0),0.0)}&true&2013-07-03 16:58:59\\ [1ex] \hline
176&\texttt{position(a1,cell(8.0,15.0),0.0)}&true&2013-07-03 16:58:59\\ [1ex] \hline
177&\texttt{position(a3,cell(10.0,16.0),0.0)}&true&2013-07-03 16:58:59\\ [1ex] \hline
178&\texttt{position(a2,cell(8.0,12.0),0.0)}&true&2013-07-03 16:58:59\\ [1ex] \hline
179&\texttt{position(a1,cell(8.0,14.0),0.0)}&true&2013-07-03 16:59:00\\ [1ex] \hline
180&\texttt{position(a3,cell(9.0,16.0),0.0)}&true&2013-07-03 16:59:00\\ [1ex] \hline
181&\texttt{position(a2,cell(8.0,11.0),0.0)}&true&2013-07-03 16:59:00\\ [1ex] \hline
182&\texttt{position(a1,cell(8.0,13.0),0.0)}&true&2013-07-03 16:59:00\\ [1ex] \hline
183&\texttt{position(a3,cell(8.0,16.0),0.0)}&true&2013-07-03 16:59:00\\ [1ex] \hline
184&\texttt{position(a2,cell(8.0,10.0),0.0)}&true&2013-07-03 16:59:00\\ [1ex] \hline
185&\texttt{position(a1,cell(8.0,12.0),0.0)}&true&2013-07-03 16:59:00\\ [1ex] \hline
186&\texttt{position(a3,cell(8.0,15.0),0.0)}&true&2013-07-03 16:59:00\\ [1ex] \hline
187&\texttt{position(a2,cell(8.0,9.0),0.0)}&true&2013-07-03 16:59:00\\ [1ex] \hline
188&\texttt{position(a1,cell(8.0,11.0),0.0)}&true&2013-07-03 16:59:01\\ [1ex] \hline
189&\texttt{position(a3,cell(8.0,14.0),0.0)}&true&2013-07-03 16:59:01\\ [1ex] \hline
190&\texttt{position(a2,cell(8.0,8.0),0.0)}&true&2013-07-03 16:59:01\\ [1ex] \hline
191&\texttt{position(a1,cell(8.0,10.0),0.0)}&true&2013-07-03 16:59:01\\ [1ex] \hline
192&\texttt{position(a3,cell(8.0,13.0),0.0)}&true&2013-07-03 16:59:01\\ [1ex] \hline
193&\texttt{position(a2,cell(8.0,7.0),0.0)}&true&2013-07-03 16:59:01\\ [1ex] \hline
194&\texttt{position(a1,cell(8.0,9.0),0.0)}&true&2013-07-03 16:59:01\\ [1ex] \hline
195&\texttt{position(a3,cell(8.0,12.0),0.0)}&true&2013-07-03 16:59:01\\ [1ex] \hline
196&\texttt{position(a2,cell(8.0,6.0),0.0)}&true&2013-07-03 16:59:01\\ [1ex] \hline
197&\texttt{position(a1,cell(8.0,8.0),0.0)}&true&2013-07-03 16:59:01\\ [1ex] \hline
198&\texttt{position(a3,cell(8.0,11.0),0.0)}&true&2013-07-03 16:59:02\\ [1ex] \hline
199&\texttt{position(a2,cell(7.0,19.0),0.0)}&true&2013-07-03 16:59:02\\ [1ex] \hline
200&\texttt{position(a1,cell(8.0,7.0),0.0)}&true&2013-07-03 16:59:02\\ [1ex] \hline
201&\texttt{position(a3,cell(8.0,10.0),0.0)}&true&2013-07-03 16:59:02\\ [1ex] \hline
202&\texttt{position(a2,cell(7.0,6.0),0.0)}&true&2013-07-03 16:59:02\\ [1ex] \hline
203&\texttt{position(a1,cell(8.0,6.0),0.0)}&true&2013-07-03 16:59:02\\ [1ex] \hline
204&\texttt{position(a3,cell(8.0,9.0),0.0)}&true&2013-07-03 16:59:02\\ [1ex] \hline
205&\texttt{position(a3,cell(8.0,8.0),0.0)}&true&2013-07-03 16:59:03\\ [1ex] \hline
206&\texttt{position(a1,cell(8.0,7.0),0.0)}&true&2013-07-03 16:59:03\\ [1ex] \hline
207&\texttt{position(a3,cell(8.0,7.0),0.0)}&true&2013-07-03 16:59:03\\ [1ex] \hline
208&\texttt{position(a1,cell(8.0,8.0),0.0)}&true&2013-07-03 16:59:03\\ [1ex] \hline
209&\texttt{position(a3,cell(8.0,6.0),0.0)}&true&2013-07-03 16:59:03\\ [1ex] \hline
210&\texttt{position(a1,cell(8.0,9.0),0.0)}&true&2013-07-03 16:59:03\\ [1ex] \hline
211&\texttt{position(a3,cell(11.0,2.0),0.0)}&true&2013-07-03 16:59:03\\ [1ex] \hline
212&\texttt{position(a1,cell(8.0,10.0),0.0)}&true&2013-07-03 16:59:04\\ [1ex] \hline
213&\texttt{position(a3,cell(8.0,7.0),0.0)}&true&2013-07-03 16:59:04\\ [1ex] \hline
214&\texttt{position(a1,cell(9.0,10.0),0.0)}&true&2013-07-03 16:59:04\\ [1ex] \hline
215&\texttt{position(a3,cell(8.0,8.0),0.0)}&true&2013-07-03 16:59:04\\ [1ex] \hline
216&\texttt{position(a1,cell(10.0,10.0),0.0)}&true&2013-07-03 16:59:04\\ [1ex] \hline
217&\texttt{position(a3,cell(8.0,9.0),0.0)}&true&2013-07-03 16:59:04\\ [1ex] \hline
218&\texttt{position(a3,cell(8.0,10.0),0.0)}&true&2013-07-03 16:59:04\\ [1ex] \hline
219&\texttt{position(a3,cell(8.0,11.0),0.0)}&true&2013-07-03 16:59:05\\ [1ex] \hline
220&\texttt{position(a3,cell(8.0,12.0),0.0)}&true&2013-07-03 16:59:05\\ [1ex] \hline
221&\texttt{position(a3,cell(8.0,13.0),0.0)}&true&2013-07-03 16:59:05\\ [1ex] \hline
222&\texttt{position(a3,cell(8.0,14.0),0.0)}&true&2013-07-03 16:59:05\\ [1ex] \hline
\end{tabular}
\caption{Event history}
\label{events}  
\end{table}

\section{Network traffic}

\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Content} & \textbf{Sender} & \textbf{Date} \\ [0.5ex] 
\hline
\end{tabular}
\caption{Event history}
\label{events}  
\end{table}

\section{Prolog states}
\clearpage 
\subsection{Prolog state 0}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
0&\texttt{cargo(cell(19.0,19.0),0.0)}&true&2013-07-03 16:58:37\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

\end{lstlisting}
\clearpage 
\subsection{Prolog state 1}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
1&\texttt{coin(cell(8.0,6.0),0.0,a1)}&true&2013-07-03 16:58:38\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

\end{lstlisting}
\clearpage 
\subsection{Prolog state 2}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
2&\texttt{position(a1,cell(3.0,4.0),0.0)}&true&2013-07-03 16:58:38\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(3.0,4.0,a1)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 3}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
3&\texttt{coin(cell(16.0,16.0),0.0,a2)}&true&2013-07-03 16:58:39\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(3.0,4.0,a1)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 4}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
4&\texttt{position(t1,cell(18.0,19.0),0.0)}&true&2013-07-03 16:58:39\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(3.0,4.0,a1)
at(18.0,19.0,t1)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 5}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
5&\texttt{position(a1,cell(3.0,5.0),0.0)}&true&2013-07-03 16:58:39\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(18.0,19.0,t1)
at(3.0,5.0,a1)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 6}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
6&\texttt{coin(cell(2.0,2.0),0.0,a3)}&true&2013-07-03 16:58:39\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(18.0,19.0,t1)
at(3.0,5.0,a1)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 7}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
7&\texttt{position(t1,cell(17.0,19.0),0.0)}&true&2013-07-03 16:58:39\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(3.0,5.0,a1)
at(17.0,19.0,t1)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 8}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
8&\texttt{position(a1,cell(4.0,5.0),0.0)}&true&2013-07-03 16:58:39\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(17.0,19.0,t1)
at(4.0,5.0,a1)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 9}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
9&\texttt{position(t1,cell(16.0,19.0),0.0)}&true&2013-07-03 16:58:40\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(4.0,5.0,a1)
at(16.0,19.0,t1)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 10}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
10&\texttt{position(a1,cell(5.0,5.0),0.0)}&true&2013-07-03 16:58:40\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(16.0,19.0,t1)
at(5.0,5.0,a1)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 11}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
11&\texttt{position(a2,cell(7.0,19.0),0.0)}&true&2013-07-03 16:58:40\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(16.0,19.0,t1)
at(5.0,5.0,a1)
at(7.0,19.0,a2)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 12}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
12&\texttt{position(a3,cell(10.0,4.0),0.0)}&true&2013-07-03 16:58:40\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(16.0,19.0,t1)
at(5.0,5.0,a1)
at(7.0,19.0,a2)
at(10.0,4.0,a3)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 13}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
13&\texttt{position(t1,cell(15.0,19.0),0.0)}&true&2013-07-03 16:58:40\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(5.0,5.0,a1)
at(7.0,19.0,a2)
at(10.0,4.0,a3)
at(15.0,19.0,t1)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 14}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
14&\texttt{position(a2,cell(6.0,19.0),0.0)}&true&2013-07-03 16:58:40\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(5.0,5.0,a1)
at(10.0,4.0,a3)
at(15.0,19.0,t1)
at(6.0,19.0,a2)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 15}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
15&\texttt{position(a3,cell(9.0,4.0),0.0)}&true&2013-07-03 16:58:40\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(5.0,5.0,a1)
at(15.0,19.0,t1)
at(6.0,19.0,a2)
at(9.0,4.0,a3)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 16}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
16&\texttt{position(t1,cell(14.0,19.0),0.0)}&true&2013-07-03 16:58:40\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(5.0,5.0,a1)
at(6.0,19.0,a2)
at(9.0,4.0,a3)
at(14.0,19.0,t1)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 17}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
17&\texttt{position(a1,cell(4.0,5.0),0.0)}&true&2013-07-03 16:58:41\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(6.0,19.0,a2)
at(9.0,4.0,a3)
at(14.0,19.0,t1)
at(4.0,5.0,a1)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 18}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
18&\texttt{position(a2,cell(5.0,19.0),0.0)}&true&2013-07-03 16:58:41\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(9.0,4.0,a3)
at(14.0,19.0,t1)
at(4.0,5.0,a1)
at(5.0,19.0,a2)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 19}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
19&\texttt{position(a3,cell(8.0,4.0),0.0)}&true&2013-07-03 16:58:41\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(14.0,19.0,t1)
at(4.0,5.0,a1)
at(5.0,19.0,a2)
at(8.0,4.0,a3)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 20}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
20&\texttt{position(t1,cell(13.0,19.0),0.0)}&true&2013-07-03 16:58:41\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(4.0,5.0,a1)
at(5.0,19.0,a2)
at(8.0,4.0,a3)
at(13.0,19.0,t1)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 21}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
21&\texttt{position(a1,cell(3.0,5.0),0.0)}&true&2013-07-03 16:58:41\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(5.0,19.0,a2)
at(8.0,4.0,a3)
at(13.0,19.0,t1)
at(3.0,5.0,a1)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 22}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
22&\texttt{position(a2,cell(4.0,19.0),0.0)}&true&2013-07-03 16:58:41\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(8.0,4.0,a3)
at(13.0,19.0,t1)
at(3.0,5.0,a1)
at(4.0,19.0,a2)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 23}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
23&\texttt{position(a3,cell(7.0,4.0),0.0)}&true&2013-07-03 16:58:41\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(13.0,19.0,t1)
at(3.0,5.0,a1)
at(4.0,19.0,a2)
at(7.0,4.0,a3)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 24}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
24&\texttt{position(t1,cell(12.0,19.0),0.0)}&true&2013-07-03 16:58:41\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(3.0,5.0,a1)
at(4.0,19.0,a2)
at(7.0,4.0,a3)
at(12.0,19.0,t1)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 25}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
25&\texttt{position(a1,cell(2.0,5.0),0.0)}&true&2013-07-03 16:58:41\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(4.0,19.0,a2)
at(7.0,4.0,a3)
at(12.0,19.0,t1)
at(2.0,5.0,a1)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 26}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
26&\texttt{position(a2,cell(3.0,19.0),0.0)}&true&2013-07-03 16:58:42\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(7.0,4.0,a3)
at(12.0,19.0,t1)
at(2.0,5.0,a1)
at(3.0,19.0,a2)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 27}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
27&\texttt{position(a3,cell(6.0,4.0),0.0)}&true&2013-07-03 16:58:42\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(12.0,19.0,t1)
at(2.0,5.0,a1)
at(3.0,19.0,a2)
at(6.0,4.0,a3)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 28}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
28&\texttt{position(t1,cell(11.0,19.0),0.0)}&true&2013-07-03 16:58:42\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,5.0,a1)
at(3.0,19.0,a2)
at(6.0,4.0,a3)
at(11.0,19.0,t1)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 29}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
29&\texttt{position(a1,cell(2.0,4.0),0.0)}&true&2013-07-03 16:58:42\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(3.0,19.0,a2)
at(6.0,4.0,a3)
at(11.0,19.0,t1)
at(2.0,4.0,a1)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 30}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
30&\texttt{position(a2,cell(2.0,19.0),0.0)}&true&2013-07-03 16:58:42\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(6.0,4.0,a3)
at(11.0,19.0,t1)
at(2.0,4.0,a1)
at(2.0,19.0,a2)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 31}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
31&\texttt{position(a3,cell(5.0,4.0),0.0)}&true&2013-07-03 16:58:42\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(11.0,19.0,t1)
at(2.0,4.0,a1)
at(2.0,19.0,a2)
at(5.0,4.0,a3)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 32}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
32&\texttt{position(t1,cell(10.0,19.0),0.0)}&true&2013-07-03 16:58:42\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,4.0,a1)
at(2.0,19.0,a2)
at(5.0,4.0,a3)
at(10.0,19.0,t1)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 33}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
33&\texttt{position(a1,cell(2.0,3.0),0.0)}&true&2013-07-03 16:58:42\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,19.0,a2)
at(5.0,4.0,a3)
at(10.0,19.0,t1)
at(2.0,3.0,a1)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 34}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
34&\texttt{position(a2,cell(2.0,18.0),0.0)}&true&2013-07-03 16:58:42\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(5.0,4.0,a3)
at(10.0,19.0,t1)
at(2.0,3.0,a1)
at(2.0,18.0,a2)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 35}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
35&\texttt{position(t1,cell(9.0,19.0),0.0)}&true&2013-07-03 16:58:43\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(5.0,4.0,a3)
at(2.0,3.0,a1)
at(2.0,18.0,a2)
at(9.0,19.0,t1)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 36}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
36&\texttt{position(a3,cell(4.0,4.0),0.0)}&true&2013-07-03 16:58:43\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,3.0,a1)
at(2.0,18.0,a2)
at(9.0,19.0,t1)
at(4.0,4.0,a3)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 37}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
37&\texttt{position(a1,cell(2.0,2.0),0.0)}&true&2013-07-03 16:58:43\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,18.0,a2)
at(9.0,19.0,t1)
at(4.0,4.0,a3)
at(2.0,2.0,a1)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 38}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
38&\texttt{position(a2,cell(2.0,17.0),0.0)}&true&2013-07-03 16:58:43\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(9.0,19.0,t1)
at(4.0,4.0,a3)
at(2.0,2.0,a1)
at(2.0,17.0,a2)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 39}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
39&\texttt{position(t1,cell(8.0,19.0),0.0)}&true&2013-07-03 16:58:43\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(4.0,4.0,a3)
at(2.0,2.0,a1)
at(2.0,17.0,a2)
at(8.0,19.0,t1)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 40}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
40&\texttt{position(a3,cell(3.0,4.0),0.0)}&true&2013-07-03 16:58:43\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,2.0,a1)
at(2.0,17.0,a2)
at(8.0,19.0,t1)
at(3.0,4.0,a3)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 41}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
41&\texttt{position(a2,cell(2.0,16.0),0.0)}&true&2013-07-03 16:58:43\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,2.0,a1)
at(8.0,19.0,t1)
at(3.0,4.0,a3)
at(2.0,16.0,a2)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 42}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
42&\texttt{position(t1,cell(7.0,19.0),0.0)}&true&2013-07-03 16:58:43\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,2.0,a1)
at(3.0,4.0,a3)
at(2.0,16.0,a2)
at(7.0,19.0,t1)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 43}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
43&\texttt{position(a3,cell(2.0,4.0),0.0)}&true&2013-07-03 16:58:43\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,2.0,a1)
at(2.0,16.0,a2)
at(7.0,19.0,t1)
at(2.0,4.0,a3)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 44}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
44&\texttt{position(a1,cell(2.0,3.0),0.0)}&true&2013-07-03 16:58:43\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,16.0,a2)
at(7.0,19.0,t1)
at(2.0,4.0,a3)
at(2.0,3.0,a1)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 45}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
45&\texttt{position(a2,cell(2.0,15.0),0.0)}&true&2013-07-03 16:58:44\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(7.0,19.0,t1)
at(2.0,4.0,a3)
at(2.0,3.0,a1)
at(2.0,15.0,a2)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 46}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
46&\texttt{position(t1,cell(6.0,19.0),0.0)}&true&2013-07-03 16:58:44\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,4.0,a3)
at(2.0,3.0,a1)
at(2.0,15.0,a2)
at(6.0,19.0,t1)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 47}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
47&\texttt{position(a3,cell(2.0,3.0),0.0)}&true&2013-07-03 16:58:44\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,3.0,a1)
at(2.0,15.0,a2)
at(6.0,19.0,t1)
at(2.0,3.0,a3)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 48}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
48&\texttt{position(a1,cell(2.0,4.0),0.0)}&true&2013-07-03 16:58:44\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,15.0,a2)
at(6.0,19.0,t1)
at(2.0,3.0,a3)
at(2.0,4.0,a1)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 49}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
49&\texttt{position(a2,cell(2.0,14.0),0.0)}&true&2013-07-03 16:58:44\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(6.0,19.0,t1)
at(2.0,3.0,a3)
at(2.0,4.0,a1)
at(2.0,14.0,a2)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 50}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
50&\texttt{position(t1,cell(5.0,19.0),0.0)}&true&2013-07-03 16:58:44\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,3.0,a3)
at(2.0,4.0,a1)
at(2.0,14.0,a2)
at(5.0,19.0,t1)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 51}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
51&\texttt{position(a3,cell(2.0,2.0),0.0)}&true&2013-07-03 16:58:44\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,4.0,a1)
at(2.0,14.0,a2)
at(5.0,19.0,t1)
at(2.0,2.0,a3)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 52}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
52&\texttt{position(a1,cell(2.0,5.0),0.0)}&true&2013-07-03 16:58:44\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,14.0,a2)
at(5.0,19.0,t1)
at(2.0,2.0,a3)
at(2.0,5.0,a1)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 53}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
53&\texttt{position(a2,cell(2.0,13.0),0.0)}&true&2013-07-03 16:58:44\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(5.0,19.0,t1)
at(2.0,2.0,a3)
at(2.0,5.0,a1)
at(2.0,13.0,a2)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 54}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
54&\texttt{position(t1,cell(4.0,19.0),0.0)}&true&2013-07-03 16:58:44\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,2.0,a3)
at(2.0,5.0,a1)
at(2.0,13.0,a2)
at(4.0,19.0,t1)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 55}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
55&\texttt{position(a3,cell(11.0,4.0),0.0)}&true&2013-07-03 16:58:45\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,5.0,a1)
at(2.0,13.0,a2)
at(4.0,19.0,t1)
at(11.0,4.0,a3)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 56}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
56&\texttt{position(a1,cell(2.0,6.0),0.0)}&true&2013-07-03 16:58:45\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,13.0,a2)
at(4.0,19.0,t1)
at(11.0,4.0,a3)
at(2.0,6.0,a1)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 57}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
57&\texttt{position(a2,cell(2.0,12.0),0.0)}&true&2013-07-03 16:58:45\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(4.0,19.0,t1)
at(11.0,4.0,a3)
at(2.0,6.0,a1)
at(2.0,12.0,a2)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 58}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
58&\texttt{position(t1,cell(3.0,19.0),0.0)}&true&2013-07-03 16:58:45\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(11.0,4.0,a3)
at(2.0,6.0,a1)
at(2.0,12.0,a2)
at(3.0,19.0,t1)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 59}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
59&\texttt{position(a3,cell(2.0,3.0),0.0)}&true&2013-07-03 16:58:45\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,6.0,a1)
at(2.0,12.0,a2)
at(3.0,19.0,t1)
at(2.0,3.0,a3)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 60}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
60&\texttt{position(a1,cell(2.0,7.0),0.0)}&true&2013-07-03 16:58:45\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,12.0,a2)
at(3.0,19.0,t1)
at(2.0,3.0,a3)
at(2.0,7.0,a1)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 61}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
61&\texttt{position(a2,cell(2.0,11.0),0.0)}&true&2013-07-03 16:58:45\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(3.0,19.0,t1)
at(2.0,3.0,a3)
at(2.0,7.0,a1)
at(2.0,11.0,a2)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 62}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
62&\texttt{position(t1,cell(2.0,19.0),0.0)}&true&2013-07-03 16:58:45\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,3.0,a3)
at(2.0,7.0,a1)
at(2.0,11.0,a2)
at(2.0,19.0,t1)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 63}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
63&\texttt{position(a3,cell(2.0,4.0),0.0)}&true&2013-07-03 16:58:45\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,7.0,a1)
at(2.0,11.0,a2)
at(2.0,19.0,t1)
at(2.0,4.0,a3)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 64}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
64&\texttt{position(a1,cell(2.0,8.0),0.0)}&true&2013-07-03 16:58:46\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,11.0,a2)
at(2.0,19.0,t1)
at(2.0,4.0,a3)
at(2.0,8.0,a1)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 65}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
65&\texttt{position(a2,cell(2.0,10.0),0.0)}&true&2013-07-03 16:58:46\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,19.0,t1)
at(2.0,4.0,a3)
at(2.0,8.0,a1)
at(2.0,10.0,a2)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 66}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
66&\texttt{position(t1,cell(2.0,18.0),0.0)}&true&2013-07-03 16:58:46\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,4.0,a3)
at(2.0,8.0,a1)
at(2.0,10.0,a2)
at(2.0,18.0,t1)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 67}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
67&\texttt{position(a3,cell(2.0,5.0),0.0)}&true&2013-07-03 16:58:46\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,8.0,a1)
at(2.0,10.0,a2)
at(2.0,18.0,t1)
at(2.0,5.0,a3)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 68}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
68&\texttt{position(a1,cell(2.0,9.0),0.0)}&true&2013-07-03 16:58:46\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,10.0,a2)
at(2.0,18.0,t1)
at(2.0,5.0,a3)
at(2.0,9.0,a1)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 69}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
69&\texttt{position(a2,cell(2.0,9.0),0.0)}&true&2013-07-03 16:58:47\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,18.0,t1)
at(2.0,5.0,a3)
at(2.0,9.0,a1)
at(2.0,9.0,a2)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 70}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
70&\texttt{position(t1,cell(2.0,17.0),0.0)}&true&2013-07-03 16:58:47\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,5.0,a3)
at(2.0,9.0,a1)
at(2.0,9.0,a2)
at(2.0,17.0,t1)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 71}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
71&\texttt{position(a3,cell(2.0,6.0),0.0)}&true&2013-07-03 16:58:47\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,9.0,a1)
at(2.0,9.0,a2)
at(2.0,17.0,t1)
at(2.0,6.0,a3)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 72}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
72&\texttt{position(a1,cell(2.0,10.0),0.0)}&true&2013-07-03 16:58:47\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,9.0,a2)
at(2.0,17.0,t1)
at(2.0,6.0,a3)
at(2.0,10.0,a1)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 73}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
73&\texttt{position(a2,cell(2.0,8.0),0.0)}&true&2013-07-03 16:58:47\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),B,(truck(B),cargo(C,D,E),clock(F), is (G,+(F,15.0)),time_since(H),>(H,5.0)),obligation([cargo(H)|[]],G,[reduce(B,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:

at(2.0,6.0,a3)
at(2.0,10.0,a1)
at(2.0,8.0,a2)
at(2.0,16.0,t1)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,F,prohibition(G,H))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 74}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
74&\texttt{position(t1,cell(2.0,16.0),0.0)}&true&2013-07-03 16:58:47\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,6.0,a3)
at(2.0,10.0,a1)
at(2.0,8.0,a2)
at(2.0,16.0,t1)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 75}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
75&\texttt{position(a3,cell(2.0,7.0),0.0)}&true&2013-07-03 16:58:47\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,10.0,a1)
at(2.0,8.0,a2)
at(2.0,16.0,t1)
at(2.0,7.0,a3)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 76}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
76&\texttt{position(a1,cell(2.0,11.0),0.0)}&true&2013-07-03 16:58:47\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,8.0,a2)
at(2.0,16.0,t1)
at(2.0,7.0,a3)
at(2.0,11.0,a1)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 77}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
77&\texttt{position(t1,cell(2.0,15.0),0.0)}&true&2013-07-03 16:58:47\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,8.0,a2)
at(2.0,7.0,a3)
at(2.0,11.0,a1)
at(2.0,15.0,t1)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 78}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
78&\texttt{position(a2,cell(2.0,7.0),0.0)}&true&2013-07-03 16:58:47\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,7.0,a3)
at(2.0,11.0,a1)
at(2.0,15.0,t1)
at(2.0,7.0,a2)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 79}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
79&\texttt{position(a3,cell(2.0,8.0),0.0)}&true&2013-07-03 16:58:47\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,11.0,a1)
at(2.0,15.0,t1)
at(2.0,7.0,a2)
at(2.0,8.0,a3)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 80}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
80&\texttt{position(a1,cell(2.0,12.0),0.0)}&true&2013-07-03 16:58:48\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,15.0,t1)
at(2.0,7.0,a2)
at(2.0,8.0,a3)
at(2.0,12.0,a1)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 81}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
81&\texttt{position(t1,cell(2.0,14.0),0.0)}&true&2013-07-03 16:58:48\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,7.0,a2)
at(2.0,8.0,a3)
at(2.0,12.0,a1)
at(2.0,14.0,t1)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 82}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
82&\texttt{position(a2,cell(2.0,6.0),0.0)}&true&2013-07-03 16:58:48\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,8.0,a3)
at(2.0,12.0,a1)
at(2.0,14.0,t1)
at(2.0,6.0,a2)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 83}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
83&\texttt{position(a3,cell(2.0,9.0),0.0)}&true&2013-07-03 16:58:48\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,12.0,a1)
at(2.0,14.0,t1)
at(2.0,6.0,a2)
at(2.0,9.0,a3)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 84}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
84&\texttt{position(a1,cell(2.0,13.0),0.0)}&true&2013-07-03 16:58:48\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,14.0,t1)
at(2.0,6.0,a2)
at(2.0,9.0,a3)
at(2.0,13.0,a1)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 85}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
85&\texttt{position(t1,cell(2.0,13.0),0.0)}&true&2013-07-03 16:58:48\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,6.0,a2)
at(2.0,9.0,a3)
at(2.0,13.0,a1)
at(2.0,13.0,t1)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 86}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
86&\texttt{position(a2,cell(2.0,5.0),0.0)}&true&2013-07-03 16:58:48\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,9.0,a3)
at(2.0,13.0,a1)
at(2.0,13.0,t1)
at(2.0,5.0,a2)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 87}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
87&\texttt{position(a3,cell(2.0,10.0),0.0)}&true&2013-07-03 16:58:48\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,13.0,a1)
at(2.0,13.0,t1)
at(2.0,5.0,a2)
at(2.0,10.0,a3)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 88}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
88&\texttt{position(a1,cell(2.0,14.0),0.0)}&true&2013-07-03 16:58:48\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,13.0,t1)
at(2.0,5.0,a2)
at(2.0,10.0,a3)
at(2.0,14.0,a1)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 89}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
89&\texttt{position(t1,cell(2.0,12.0),0.0)}&true&2013-07-03 16:58:49\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,5.0,a2)
at(2.0,10.0,a3)
at(2.0,14.0,a1)
at(2.0,12.0,t1)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 90}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
90&\texttt{position(a2,cell(2.0,4.0),0.0)}&true&2013-07-03 16:58:49\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,10.0,a3)
at(2.0,14.0,a1)
at(2.0,12.0,t1)
at(2.0,4.0,a2)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 91}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
91&\texttt{position(a3,cell(2.0,11.0),0.0)}&true&2013-07-03 16:58:49\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,14.0,a1)
at(2.0,12.0,t1)
at(2.0,4.0,a2)
at(2.0,11.0,a3)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 92}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
92&\texttt{position(a1,cell(2.0,15.0),0.0)}&true&2013-07-03 16:58:49\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,12.0,t1)
at(2.0,4.0,a2)
at(2.0,11.0,a3)
at(2.0,15.0,a1)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 93}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
93&\texttt{position(t1,cell(2.0,11.0),0.0)}&true&2013-07-03 16:58:49\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,4.0,a2)
at(2.0,11.0,a3)
at(2.0,15.0,a1)
at(2.0,11.0,t1)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 94}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
94&\texttt{position(a2,cell(2.0,3.0),0.0)}&true&2013-07-03 16:58:49\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,11.0,a3)
at(2.0,15.0,a1)
at(2.0,11.0,t1)
at(2.0,3.0,a2)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 95}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
95&\texttt{position(a3,cell(2.0,12.0),0.0)}&true&2013-07-03 16:58:49\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,15.0,a1)
at(2.0,11.0,t1)
at(2.0,3.0,a2)
at(2.0,12.0,a3)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 96}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
96&\texttt{position(a1,cell(2.0,16.0),0.0)}&true&2013-07-03 16:58:49\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,11.0,t1)
at(2.0,3.0,a2)
at(2.0,12.0,a3)
at(2.0,16.0,a1)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 97}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
97&\texttt{position(t1,cell(2.0,10.0),0.0)}&true&2013-07-03 16:58:50\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,3.0,a2)
at(2.0,12.0,a3)
at(2.0,16.0,a1)
at(2.0,10.0,t1)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 98}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
98&\texttt{position(a2,cell(2.0,2.0),0.0)}&true&2013-07-03 16:58:50\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,12.0,a3)
at(2.0,16.0,a1)
at(2.0,10.0,t1)
at(2.0,2.0,a2)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 99}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
99&\texttt{position(a3,cell(2.0,13.0),0.0)}&true&2013-07-03 16:58:50\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,16.0,a1)
at(2.0,10.0,t1)
at(2.0,2.0,a2)
at(2.0,13.0,a3)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 100}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
100&\texttt{position(a1,cell(3.0,16.0),0.0)}&true&2013-07-03 16:58:50\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,10.0,t1)
at(2.0,2.0,a2)
at(2.0,13.0,a3)
at(3.0,16.0,a1)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 101}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
101&\texttt{position(t1,cell(2.0,9.0),0.0)}&true&2013-07-03 16:58:50\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,2.0,a2)
at(2.0,13.0,a3)
at(3.0,16.0,a1)
at(2.0,9.0,t1)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 102}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
102&\texttt{position(a3,cell(2.0,14.0),0.0)}&true&2013-07-03 16:58:50\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,2.0,a2)
at(3.0,16.0,a1)
at(2.0,9.0,t1)
at(2.0,14.0,a3)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 103}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
103&\texttt{position(a2,cell(9.0,19.0),0.0)}&true&2013-07-03 16:58:50\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(3.0,16.0,a1)
at(2.0,9.0,t1)
at(2.0,14.0,a3)
at(9.0,19.0,a2)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 104}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
104&\texttt{position(a1,cell(4.0,16.0),0.0)}&true&2013-07-03 16:58:50\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,9.0,t1)
at(2.0,14.0,a3)
at(9.0,19.0,a2)
at(4.0,16.0,a1)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 105}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
105&\texttt{position(t1,cell(2.0,8.0),0.0)}&true&2013-07-03 16:58:50\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,14.0,a3)
at(9.0,19.0,a2)
at(4.0,16.0,a1)
at(2.0,8.0,t1)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 106}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
106&\texttt{position(a3,cell(2.0,15.0),0.0)}&true&2013-07-03 16:58:50\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(9.0,19.0,a2)
at(4.0,16.0,a1)
at(2.0,8.0,t1)
at(2.0,15.0,a3)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 107}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
107&\texttt{position(a2,cell(10.0,19.0),0.0)}&true&2013-07-03 16:58:50\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(4.0,16.0,a1)
at(2.0,8.0,t1)
at(2.0,15.0,a3)
at(10.0,19.0,a2)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 108}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
108&\texttt{position(a1,cell(5.0,16.0),0.0)}&true&2013-07-03 16:58:51\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,8.0,t1)
at(2.0,15.0,a3)
at(10.0,19.0,a2)
at(5.0,16.0,a1)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 109}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
109&\texttt{position(t1,cell(2.0,7.0),0.0)}&true&2013-07-03 16:58:51\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,15.0,a3)
at(10.0,19.0,a2)
at(5.0,16.0,a1)
at(2.0,7.0,t1)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 110}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
110&\texttt{position(a3,cell(2.0,16.0),0.0)}&true&2013-07-03 16:58:51\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(10.0,19.0,a2)
at(5.0,16.0,a1)
at(2.0,7.0,t1)
at(2.0,16.0,a3)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 111}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
111&\texttt{position(a2,cell(11.0,19.0),0.0)}&true&2013-07-03 16:58:51\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(5.0,16.0,a1)
at(2.0,7.0,t1)
at(2.0,16.0,a3)
at(11.0,19.0,a2)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 112}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
112&\texttt{position(a1,cell(6.0,16.0),0.0)}&true&2013-07-03 16:58:51\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,7.0,t1)
at(2.0,16.0,a3)
at(11.0,19.0,a2)
at(6.0,16.0,a1)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 113}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
113&\texttt{position(t1,cell(2.0,6.0),0.0)}&true&2013-07-03 16:58:51\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,16.0,a3)
at(11.0,19.0,a2)
at(6.0,16.0,a1)
at(2.0,6.0,t1)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 114}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
114&\texttt{position(a3,cell(3.0,16.0),0.0)}&true&2013-07-03 16:58:51\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(11.0,19.0,a2)
at(6.0,16.0,a1)
at(2.0,6.0,t1)
at(3.0,16.0,a3)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 115}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
115&\texttt{position(a2,cell(12.0,19.0),0.0)}&true&2013-07-03 16:58:51\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(6.0,16.0,a1)
at(2.0,6.0,t1)
at(3.0,16.0,a3)
at(12.0,19.0,a2)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 116}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
116&\texttt{position(a1,cell(7.0,16.0),0.0)}&true&2013-07-03 16:58:51\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,6.0,t1)
at(3.0,16.0,a3)
at(12.0,19.0,a2)
at(7.0,16.0,a1)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 117}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
117&\texttt{position(t1,cell(2.0,5.0),0.0)}&true&2013-07-03 16:58:52\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(3.0,16.0,a3)
at(12.0,19.0,a2)
at(7.0,16.0,a1)
at(2.0,5.0,t1)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 118}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
118&\texttt{position(a3,cell(4.0,16.0),0.0)}&true&2013-07-03 16:58:52\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(12.0,19.0,a2)
at(7.0,16.0,a1)
at(2.0,5.0,t1)
at(4.0,16.0,a3)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 119}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
119&\texttt{position(a2,cell(13.0,19.0),0.0)}&true&2013-07-03 16:58:52\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(7.0,16.0,a1)
at(2.0,5.0,t1)
at(4.0,16.0,a3)
at(13.0,19.0,a2)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 120}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
120&\texttt{position(a1,cell(8.0,16.0),0.0)}&true&2013-07-03 16:58:52\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,5.0,t1)
at(4.0,16.0,a3)
at(13.0,19.0,a2)
at(8.0,16.0,a1)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 121}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
121&\texttt{position(t1,cell(2.0,4.0),0.0)}&true&2013-07-03 16:58:52\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(4.0,16.0,a3)
at(13.0,19.0,a2)
at(8.0,16.0,a1)
at(2.0,4.0,t1)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 122}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
122&\texttt{position(a3,cell(5.0,16.0),0.0)}&true&2013-07-03 16:58:52\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(13.0,19.0,a2)
at(8.0,16.0,a1)
at(2.0,4.0,t1)
at(5.0,16.0,a3)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 123}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
123&\texttt{position(a2,cell(14.0,19.0),0.0)}&true&2013-07-03 16:58:52\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(8.0,16.0,a1)
at(2.0,4.0,t1)
at(5.0,16.0,a3)
at(14.0,19.0,a2)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 124}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
124&\texttt{position(a1,cell(9.0,16.0),0.0)}&true&2013-07-03 16:58:52\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,4.0,t1)
at(5.0,16.0,a3)
at(14.0,19.0,a2)
at(9.0,16.0,a1)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 125}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
125&\texttt{position(t1,cell(2.0,3.0),0.0)}&true&2013-07-03 16:58:52\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(5.0,16.0,a3)
at(14.0,19.0,a2)
at(9.0,16.0,a1)
at(2.0,3.0,t1)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 126}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
126&\texttt{position(a3,cell(6.0,16.0),0.0)}&true&2013-07-03 16:58:53\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(14.0,19.0,a2)
at(9.0,16.0,a1)
at(2.0,3.0,t1)
at(6.0,16.0,a3)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 127}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
127&\texttt{position(a2,cell(15.0,19.0),0.0)}&true&2013-07-03 16:58:53\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(9.0,16.0,a1)
at(2.0,3.0,t1)
at(6.0,16.0,a3)
at(15.0,19.0,a2)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 128}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
128&\texttt{position(a1,cell(10.0,16.0),0.0)}&true&2013-07-03 16:58:53\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,3.0,t1)
at(6.0,16.0,a3)
at(15.0,19.0,a2)
at(10.0,16.0,a1)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 129}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
129&\texttt{position(t1,cell(2.0,2.0),0.0)}&true&2013-07-03 16:58:53\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(6.0,16.0,a3)
at(15.0,19.0,a2)
at(10.0,16.0,a1)
at(2.0,2.0,t1)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 130}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
130&\texttt{position(a3,cell(7.0,16.0),0.0)}&true&2013-07-03 16:58:53\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(15.0,19.0,a2)
at(10.0,16.0,a1)
at(2.0,2.0,t1)
at(7.0,16.0,a3)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 131}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
131&\texttt{position(a2,cell(16.0,19.0),0.0)}&true&2013-07-03 16:58:53\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(10.0,16.0,a1)
at(2.0,2.0,t1)
at(7.0,16.0,a3)
at(16.0,19.0,a2)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 132}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
132&\texttt{position(a1,cell(11.0,16.0),0.0)}&true&2013-07-03 16:58:53\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,2.0,t1)
at(7.0,16.0,a3)
at(16.0,19.0,a2)
at(11.0,16.0,a1)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 133}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
133&\texttt{position(a3,cell(8.0,16.0),0.0)}&true&2013-07-03 16:58:53\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,2.0,t1)
at(16.0,19.0,a2)
at(11.0,16.0,a1)
at(8.0,16.0,a3)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 134}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
134&\texttt{position(a2,cell(16.0,18.0),0.0)}&true&2013-07-03 16:58:53\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,2.0,t1)
at(11.0,16.0,a1)
at(8.0,16.0,a3)
at(16.0,18.0,a2)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 135}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
135&\texttt{position(a1,cell(12.0,16.0),0.0)}&true&2013-07-03 16:58:54\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,2.0,t1)
at(8.0,16.0,a3)
at(16.0,18.0,a2)
at(12.0,16.0,a1)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 136}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
136&\texttt{position(a3,cell(9.0,16.0),0.0)}&true&2013-07-03 16:58:54\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,2.0,t1)
at(16.0,18.0,a2)
at(12.0,16.0,a1)
at(9.0,16.0,a3)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 137}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
137&\texttt{position(a2,cell(16.0,17.0),0.0)}&true&2013-07-03 16:58:54\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,2.0,t1)
at(12.0,16.0,a1)
at(9.0,16.0,a3)
at(16.0,17.0,a2)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 138}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
138&\texttt{position(a1,cell(13.0,16.0),0.0)}&true&2013-07-03 16:58:54\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,2.0,t1)
at(9.0,16.0,a3)
at(16.0,17.0,a2)
at(13.0,16.0,a1)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 139}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
139&\texttt{position(a3,cell(10.0,16.0),0.0)}&true&2013-07-03 16:58:54\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,2.0,t1)
at(16.0,17.0,a2)
at(13.0,16.0,a1)
at(10.0,16.0,a3)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 140}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
140&\texttt{position(a2,cell(16.0,16.0),0.0)}&true&2013-07-03 16:58:54\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,2.0,t1)
at(13.0,16.0,a1)
at(10.0,16.0,a3)
at(16.0,16.0,a2)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 141}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
141&\texttt{position(a1,cell(14.0,16.0),0.0)}&true&2013-07-03 16:58:54\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,2.0,t1)
at(10.0,16.0,a3)
at(16.0,16.0,a2)
at(14.0,16.0,a1)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 142}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
142&\texttt{position(a3,cell(11.0,16.0),0.0)}&true&2013-07-03 16:58:54\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,2.0,t1)
at(16.0,16.0,a2)
at(14.0,16.0,a1)
at(11.0,16.0,a3)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 143}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
143&\texttt{position(a2,cell(8.0,19.0),0.0)}&true&2013-07-03 16:58:54\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,2.0,t1)
at(14.0,16.0,a1)
at(11.0,16.0,a3)
at(8.0,19.0,a2)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 144}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
144&\texttt{position(a1,cell(15.0,16.0),0.0)}&true&2013-07-03 16:58:55\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,2.0,t1)
at(11.0,16.0,a3)
at(8.0,19.0,a2)
at(15.0,16.0,a1)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 145}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
145&\texttt{position(a3,cell(12.0,16.0),0.0)}&true&2013-07-03 16:58:55\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,2.0,t1)
at(8.0,19.0,a2)
at(15.0,16.0,a1)
at(12.0,16.0,a3)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 146}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
146&\texttt{position(a2,cell(15.0,16.0),0.0)}&true&2013-07-03 16:58:55\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,2.0,t1)
at(15.0,16.0,a1)
at(12.0,16.0,a3)
at(15.0,16.0,a2)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 147}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
147&\texttt{position(a1,cell(16.0,16.0),0.0)}&true&2013-07-03 16:58:55\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,2.0,t1)
at(12.0,16.0,a3)
at(15.0,16.0,a2)
at(16.0,16.0,a1)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 148}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
148&\texttt{position(a3,cell(13.0,16.0),0.0)}&true&2013-07-03 16:58:55\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,2.0,t1)
at(15.0,16.0,a2)
at(16.0,16.0,a1)
at(13.0,16.0,a3)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 149}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
149&\texttt{position(a2,cell(14.0,16.0),0.0)}&true&2013-07-03 16:58:55\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,2.0,t1)
at(16.0,16.0,a1)
at(13.0,16.0,a3)
at(14.0,16.0,a2)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 150}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
150&\texttt{position(a3,cell(14.0,16.0),0.0)}&true&2013-07-03 16:58:55\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,2.0,t1)
at(16.0,16.0,a1)
at(14.0,16.0,a2)
at(14.0,16.0,a3)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 151}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
151&\texttt{position(a2,cell(13.0,16.0),0.0)}&true&2013-07-03 16:58:55\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,2.0,t1)
at(16.0,16.0,a1)
at(14.0,16.0,a3)
at(13.0,16.0,a2)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 152}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
152&\texttt{position(a1,cell(15.0,16.0),0.0)}&true&2013-07-03 16:58:55\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,2.0,t1)
at(14.0,16.0,a3)
at(13.0,16.0,a2)
at(15.0,16.0,a1)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 153}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
153&\texttt{position(a3,cell(15.0,16.0),0.0)}&true&2013-07-03 16:58:56\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,2.0,t1)
at(13.0,16.0,a2)
at(15.0,16.0,a1)
at(15.0,16.0,a3)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 154}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
154&\texttt{position(a2,cell(12.0,16.0),0.0)}&true&2013-07-03 16:58:56\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,2.0,t1)
at(15.0,16.0,a1)
at(15.0,16.0,a3)
at(12.0,16.0,a2)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 155}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
155&\texttt{position(a1,cell(14.0,16.0),0.0)}&true&2013-07-03 16:58:56\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,2.0,t1)
at(15.0,16.0,a3)
at(12.0,16.0,a2)
at(14.0,16.0,a1)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 156}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
156&\texttt{position(a3,cell(16.0,16.0),0.0)}&true&2013-07-03 16:58:56\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,2.0,t1)
at(12.0,16.0,a2)
at(14.0,16.0,a1)
at(16.0,16.0,a3)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 157}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
157&\texttt{position(a2,cell(11.0,16.0),0.0)}&true&2013-07-03 16:58:56\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,2.0,t1)
at(14.0,16.0,a1)
at(16.0,16.0,a3)
at(11.0,16.0,a2)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 158}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
158&\texttt{position(a1,cell(13.0,16.0),0.0)}&true&2013-07-03 16:58:56\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,2.0,t1)
at(16.0,16.0,a3)
at(11.0,16.0,a2)
at(13.0,16.0,a1)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 159}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
159&\texttt{position(a3,cell(11.0,3.0),0.0)}&true&2013-07-03 16:58:57\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,2.0,t1)
at(11.0,16.0,a2)
at(13.0,16.0,a1)
at(11.0,3.0,a3)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 160}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
160&\texttt{position(a2,cell(10.0,16.0),0.0)}&true&2013-07-03 16:58:57\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,2.0,t1)
at(13.0,16.0,a1)
at(11.0,3.0,a3)
at(10.0,16.0,a2)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 161}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
161&\texttt{position(a1,cell(12.0,16.0),0.0)}&true&2013-07-03 16:58:57\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,2.0,t1)
at(11.0,3.0,a3)
at(10.0,16.0,a2)
at(12.0,16.0,a1)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 162}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
162&\texttt{position(a3,cell(15.0,16.0),0.0)}&true&2013-07-03 16:58:57\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,2.0,t1)
at(10.0,16.0,a2)
at(12.0,16.0,a1)
at(15.0,16.0,a3)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 163}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
163&\texttt{position(a2,cell(9.0,16.0),0.0)}&true&2013-07-03 16:58:57\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,2.0,t1)
at(12.0,16.0,a1)
at(15.0,16.0,a3)
at(9.0,16.0,a2)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 164}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
164&\texttt{position(a1,cell(11.0,16.0),0.0)}&true&2013-07-03 16:58:58\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,2.0,t1)
at(15.0,16.0,a3)
at(9.0,16.0,a2)
at(11.0,16.0,a1)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 165}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
165&\texttt{position(a3,cell(14.0,16.0),0.0)}&true&2013-07-03 16:58:58\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,2.0,t1)
at(9.0,16.0,a2)
at(11.0,16.0,a1)
at(14.0,16.0,a3)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 166}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
166&\texttt{position(a2,cell(8.0,16.0),0.0)}&true&2013-07-03 16:58:58\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,2.0,t1)
at(11.0,16.0,a1)
at(14.0,16.0,a3)
at(8.0,16.0,a2)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 167}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
167&\texttt{position(a1,cell(10.0,16.0),0.0)}&true&2013-07-03 16:58:58\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,2.0,t1)
at(14.0,16.0,a3)
at(8.0,16.0,a2)
at(10.0,16.0,a1)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 168}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
168&\texttt{position(a3,cell(13.0,16.0),0.0)}&true&2013-07-03 16:58:58\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,2.0,t1)
at(8.0,16.0,a2)
at(10.0,16.0,a1)
at(13.0,16.0,a3)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 169}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
169&\texttt{position(a2,cell(8.0,15.0),0.0)}&true&2013-07-03 16:58:59\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,2.0,t1)
at(10.0,16.0,a1)
at(13.0,16.0,a3)
at(8.0,15.0,a2)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 170}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
170&\texttt{position(a1,cell(9.0,16.0),0.0)}&true&2013-07-03 16:58:59\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,2.0,t1)
at(13.0,16.0,a3)
at(8.0,15.0,a2)
at(9.0,16.0,a1)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 171}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
171&\texttt{position(a3,cell(12.0,16.0),0.0)}&true&2013-07-03 16:58:59\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,2.0,t1)
at(8.0,15.0,a2)
at(9.0,16.0,a1)
at(12.0,16.0,a3)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 172}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
172&\texttt{position(a2,cell(8.0,14.0),0.0)}&true&2013-07-03 16:58:59\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,2.0,t1)
at(9.0,16.0,a1)
at(12.0,16.0,a3)
at(8.0,14.0,a2)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 173}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
173&\texttt{position(a1,cell(8.0,16.0),0.0)}&true&2013-07-03 16:58:59\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,2.0,t1)
at(12.0,16.0,a3)
at(8.0,14.0,a2)
at(8.0,16.0,a1)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 174}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
174&\texttt{position(a3,cell(11.0,16.0),0.0)}&true&2013-07-03 16:58:59\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,2.0,t1)
at(8.0,14.0,a2)
at(8.0,16.0,a1)
at(11.0,16.0,a3)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 175}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
175&\texttt{position(a2,cell(8.0,13.0),0.0)}&true&2013-07-03 16:58:59\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,2.0,t1)
at(8.0,16.0,a1)
at(11.0,16.0,a3)
at(8.0,13.0,a2)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 176}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
176&\texttt{position(a1,cell(8.0,15.0),0.0)}&true&2013-07-03 16:58:59\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,2.0,t1)
at(11.0,16.0,a3)
at(8.0,13.0,a2)
at(8.0,15.0,a1)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 177}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
177&\texttt{position(a3,cell(10.0,16.0),0.0)}&true&2013-07-03 16:58:59\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,2.0,t1)
at(8.0,13.0,a2)
at(8.0,15.0,a1)
at(10.0,16.0,a3)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 178}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
178&\texttt{position(a2,cell(8.0,12.0),0.0)}&true&2013-07-03 16:58:59\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,2.0,t1)
at(8.0,15.0,a1)
at(10.0,16.0,a3)
at(8.0,12.0,a2)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 179}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
179&\texttt{position(a1,cell(8.0,14.0),0.0)}&true&2013-07-03 16:59:00\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,2.0,t1)
at(10.0,16.0,a3)
at(8.0,12.0,a2)
at(8.0,14.0,a1)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 180}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
180&\texttt{position(a3,cell(9.0,16.0),0.0)}&true&2013-07-03 16:59:00\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,2.0,t1)
at(8.0,12.0,a2)
at(8.0,14.0,a1)
at(9.0,16.0,a3)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 181}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
181&\texttt{position(a2,cell(8.0,11.0),0.0)}&true&2013-07-03 16:59:00\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,2.0,t1)
at(8.0,14.0,a1)
at(9.0,16.0,a3)
at(8.0,11.0,a2)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 182}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
182&\texttt{position(a1,cell(8.0,13.0),0.0)}&true&2013-07-03 16:59:00\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,2.0,t1)
at(9.0,16.0,a3)
at(8.0,11.0,a2)
at(8.0,13.0,a1)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 183}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
183&\texttt{position(a3,cell(8.0,16.0),0.0)}&true&2013-07-03 16:59:00\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,2.0,t1)
at(8.0,11.0,a2)
at(8.0,13.0,a1)
at(8.0,16.0,a3)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 184}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
184&\texttt{position(a2,cell(8.0,10.0),0.0)}&true&2013-07-03 16:59:00\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,2.0,t1)
at(8.0,13.0,a1)
at(8.0,16.0,a3)
at(8.0,10.0,a2)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 185}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
185&\texttt{position(a1,cell(8.0,12.0),0.0)}&true&2013-07-03 16:59:00\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,2.0,t1)
at(8.0,16.0,a3)
at(8.0,10.0,a2)
at(8.0,12.0,a1)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 186}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
186&\texttt{position(a3,cell(8.0,15.0),0.0)}&true&2013-07-03 16:59:00\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,2.0,t1)
at(8.0,10.0,a2)
at(8.0,12.0,a1)
at(8.0,15.0,a3)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 187}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
187&\texttt{position(a2,cell(8.0,9.0),0.0)}&true&2013-07-03 16:59:00\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,2.0,t1)
at(8.0,12.0,a1)
at(8.0,15.0,a3)
at(8.0,9.0,a2)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 188}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
188&\texttt{position(a1,cell(8.0,11.0),0.0)}&true&2013-07-03 16:59:01\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,2.0,t1)
at(8.0,15.0,a3)
at(8.0,9.0,a2)
at(8.0,11.0,a1)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 189}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
189&\texttt{position(a3,cell(8.0,14.0),0.0)}&true&2013-07-03 16:59:01\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,2.0,t1)
at(8.0,9.0,a2)
at(8.0,11.0,a1)
at(8.0,14.0,a3)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 190}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
190&\texttt{position(a2,cell(8.0,8.0),0.0)}&true&2013-07-03 16:59:01\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,2.0,t1)
at(8.0,11.0,a1)
at(8.0,14.0,a3)
at(8.0,8.0,a2)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 191}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
191&\texttt{position(a1,cell(8.0,10.0),0.0)}&true&2013-07-03 16:59:01\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,2.0,t1)
at(8.0,14.0,a3)
at(8.0,8.0,a2)
at(8.0,10.0,a1)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 192}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
192&\texttt{position(a3,cell(8.0,13.0),0.0)}&true&2013-07-03 16:59:01\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,2.0,t1)
at(8.0,8.0,a2)
at(8.0,10.0,a1)
at(8.0,13.0,a3)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 193}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
193&\texttt{position(a2,cell(8.0,7.0),0.0)}&true&2013-07-03 16:59:01\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,2.0,t1)
at(8.0,10.0,a1)
at(8.0,13.0,a3)
at(8.0,7.0,a2)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 194}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
194&\texttt{position(a1,cell(8.0,9.0),0.0)}&true&2013-07-03 16:59:01\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,2.0,t1)
at(8.0,13.0,a3)
at(8.0,7.0,a2)
at(8.0,9.0,a1)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 195}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
195&\texttt{position(a3,cell(8.0,12.0),0.0)}&true&2013-07-03 16:59:01\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,2.0,t1)
at(8.0,7.0,a2)
at(8.0,9.0,a1)
at(8.0,12.0,a3)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 196}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
196&\texttt{position(a2,cell(8.0,6.0),0.0)}&true&2013-07-03 16:59:01\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,2.0,t1)
at(8.0,9.0,a1)
at(8.0,12.0,a3)
at(8.0,6.0,a2)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 197}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
197&\texttt{position(a1,cell(8.0,8.0),0.0)}&true&2013-07-03 16:59:01\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,2.0,t1)
at(8.0,12.0,a3)
at(8.0,6.0,a2)
at(8.0,8.0,a1)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 198}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
198&\texttt{position(a3,cell(8.0,11.0),0.0)}&true&2013-07-03 16:59:02\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,2.0,t1)
at(8.0,6.0,a2)
at(8.0,8.0,a1)
at(8.0,11.0,a3)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 199}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
199&\texttt{position(a2,cell(7.0,19.0),0.0)}&true&2013-07-03 16:59:02\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,2.0,t1)
at(8.0,8.0,a1)
at(8.0,11.0,a3)
at(7.0,19.0,a2)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 200}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
200&\texttt{position(a1,cell(8.0,7.0),0.0)}&true&2013-07-03 16:59:02\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,2.0,t1)
at(8.0,11.0,a3)
at(7.0,19.0,a2)
at(8.0,7.0,a1)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 201}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
201&\texttt{position(a3,cell(8.0,10.0),0.0)}&true&2013-07-03 16:59:02\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,2.0,t1)
at(7.0,19.0,a2)
at(8.0,7.0,a1)
at(8.0,10.0,a3)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 202}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
202&\texttt{position(a2,cell(7.0,6.0),0.0)}&true&2013-07-03 16:59:02\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,2.0,t1)
at(8.0,7.0,a1)
at(8.0,10.0,a3)
at(7.0,6.0,a2)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 203}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
203&\texttt{position(a1,cell(8.0,6.0),0.0)}&true&2013-07-03 16:59:02\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,2.0,t1)
at(8.0,10.0,a3)
at(7.0,6.0,a2)
at(8.0,6.0,a1)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 204}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
204&\texttt{position(a3,cell(8.0,9.0),0.0)}&true&2013-07-03 16:59:02\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,2.0,t1)
at(7.0,6.0,a2)
at(8.0,6.0,a1)
at(8.0,9.0,a3)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 205}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
205&\texttt{position(a3,cell(8.0,8.0),0.0)}&true&2013-07-03 16:59:03\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,2.0,t1)
at(7.0,6.0,a2)
at(8.0,6.0,a1)
at(8.0,8.0,a3)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 206}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
206&\texttt{position(a1,cell(8.0,7.0),0.0)}&true&2013-07-03 16:59:03\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,2.0,t1)
at(7.0,6.0,a2)
at(8.0,8.0,a3)
at(8.0,7.0,a1)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 207}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
207&\texttt{position(a3,cell(8.0,7.0),0.0)}&true&2013-07-03 16:59:03\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,2.0,t1)
at(7.0,6.0,a2)
at(8.0,7.0,a1)
at(8.0,7.0,a3)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 208}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
208&\texttt{position(a1,cell(8.0,8.0),0.0)}&true&2013-07-03 16:59:03\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,2.0,t1)
at(7.0,6.0,a2)
at(8.0,7.0,a3)
at(8.0,8.0,a1)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 209}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
209&\texttt{position(a3,cell(8.0,6.0),0.0)}&true&2013-07-03 16:59:03\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,2.0,t1)
at(7.0,6.0,a2)
at(8.0,8.0,a1)
at(8.0,6.0,a3)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 210}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
210&\texttt{position(a1,cell(8.0,9.0),0.0)}&true&2013-07-03 16:59:03\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,2.0,t1)
at(7.0,6.0,a2)
at(8.0,6.0,a3)
at(8.0,9.0,a1)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 211}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
211&\texttt{position(a3,cell(11.0,2.0),0.0)}&true&2013-07-03 16:59:03\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,2.0,t1)
at(7.0,6.0,a2)
at(8.0,9.0,a1)
at(11.0,2.0,a3)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 212}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
212&\texttt{position(a1,cell(8.0,10.0),0.0)}&true&2013-07-03 16:59:04\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,2.0,t1)
at(7.0,6.0,a2)
at(11.0,2.0,a3)
at(8.0,10.0,a1)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 213}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
213&\texttt{position(a3,cell(8.0,7.0),0.0)}&true&2013-07-03 16:59:04\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,2.0,t1)
at(7.0,6.0,a2)
at(8.0,10.0,a1)
at(8.0,7.0,a3)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 214}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
214&\texttt{position(a1,cell(9.0,10.0),0.0)}&true&2013-07-03 16:59:04\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,2.0,t1)
at(7.0,6.0,a2)
at(8.0,7.0,a3)
at(9.0,10.0,a1)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 215}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
215&\texttt{position(a3,cell(8.0,8.0),0.0)}&true&2013-07-03 16:59:04\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,2.0,t1)
at(7.0,6.0,a2)
at(9.0,10.0,a1)
at(8.0,8.0,a3)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 216}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
216&\texttt{position(a1,cell(10.0,10.0),0.0)}&true&2013-07-03 16:59:04\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,2.0,t1)
at(7.0,6.0,a2)
at(8.0,8.0,a3)
at(10.0,10.0,a1)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 217}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
217&\texttt{position(a3,cell(8.0,9.0),0.0)}&true&2013-07-03 16:59:04\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,2.0,t1)
at(7.0,6.0,a2)
at(10.0,10.0,a1)
at(8.0,9.0,a3)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 218}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
218&\texttt{position(a3,cell(8.0,10.0),0.0)}&true&2013-07-03 16:59:04\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,2.0,t1)
at(7.0,6.0,a2)
at(10.0,10.0,a1)
at(8.0,10.0,a3)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 219}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
219&\texttt{position(a3,cell(8.0,11.0),0.0)}&true&2013-07-03 16:59:05\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,2.0,t1)
at(7.0,6.0,a2)
at(10.0,10.0,a1)
at(8.0,11.0,a3)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 220}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
220&\texttt{position(a3,cell(8.0,12.0),0.0)}&true&2013-07-03 16:59:05\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,2.0,t1)
at(7.0,6.0,a2)
at(10.0,10.0,a1)
at(8.0,12.0,a3)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 221}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
221&\texttt{position(a3,cell(8.0,13.0),0.0)}&true&2013-07-03 16:59:05\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,2.0,t1)
at(7.0,6.0,a2)
at(10.0,10.0,a1)
at(8.0,13.0,a3)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}
\clearpage 
\subsection{Prolog state 222}
\begin{table}[ht]
\centering 
\begin{tabular}{l l l l} 
\textbf{\#} & \textbf{Event} & \textbf{Regimented} & \textbf{Date} \\ [0.5ex] 
\hline
222&\texttt{position(a3,cell(8.0,14.0),0.0)}&true&2013-07-03 16:59:05\\ [1ex] \hline\end{tabular}
\end{table}
The state after this event:

\lstset{breaklines=true}\begin{lstlisting}[language=Prolog, numbers=left]
% Rules with string id: norm
% norm/4:
norm(enter_water(A),A,(truck(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(game_area(A),A,(truck(A),not_area(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,500.0)|[]]))
norm(drop_load(A),A,(truck(A),cargo(B,C,D),clock(E), is (F,+(E,15.0)),time_since(G),>(G,5.0)),obligation([cargo(G)|[]],F,[reduce(A,400.0)|[]]))
norm(place_coin_near(A),A,(controller(A),coin(B,C), is (D,+(B,1.0)), is (E,+(C,1.0)),gameArea(B,C)),prohibition([coin(D,E)|[]],[reduce(A,200.0)|[]]))
norm(place_coin_water(A),A,(controller(A),agent(B),water(C,D)),prohibition([coin(C,D,B)|[]],[reduce(A,300.0)|[]]))
norm(place_coin(A),A,(controller(A),clock(B), is (C,+(B,5.0)),time_since(D),int(D),agent(E)),obligation([coin(E)|[]],C,[reduce(A,100.0)|[]]))
norm(read_on_the_same_place(A),A,(agent(A),reading(B,C,D,A,E), is (F,+(E,1.0))),prohibition([reading(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(enter_water(A),A,(agent(A),water(B,C)),prohibition([at(B,C,A)|[]],[reduce(A,300.0)|[]]))
norm(collect_coin(A),A,(agent(A),coin(B,C),clock(D), is (E,+(D,20.0))),obligation([makeReading(B,C)|[]],E,[reduce(A,400.0)|[]]))

% Rules with string id: notifyAgent
% notifyAgent/2:
notifyAgent(A,B) :- @external(geoSenseMW,notifyAgent(A,B),C).

% Rules with string id: truck
% truck/1:
truck(t1)

% Rules with string id: water
% water/2:
water(5.0,5.0)
water(5.0,6.0)
water(6.0,5.0)
water(6.0,6.0)

% Rules with string id: at
% at/3:
at(2.0,2.0,t1)
at(7.0,6.0,a2)
at(10.0,10.0,a1)
at(8.0,14.0,a3)

% Rules with string id: reduce
% reduce/2:
reduce(a1,300.0)

% Rules with string id: not_area
% not_area/2:
not_area(A,B) :-  is (A,20.0),int(B),>(B,0.0),<(B,;(20.0,:(not_area(A,B), is (-(B),20.0)))),int(A),>(A,0.0),<(A,;(20.0,:(area(A,B),-(int(A))))),int(B),>(A,0.0),>(B,0.0),<(A,21.0),<(B,21.0).

% Rules with string id: clock
% clock/1:
clock(0.0)

% Rules with string id: time_since
% time_since/1:
time_since(A) :- clock(B),>(A,B).

% Rules with string id: controller
% controller/1:
controller(c1)

% Rules with string id: coin
% coin/2:
coin(8.0,6.0)
coin(16.0,16.0)
coin(2.0,2.0)

% Rules with string id: agent
% agent/1:
agent(a1)
agent(a2)
agent(a3)

% Rules with string id: movable
% movable/1:
movable(A) :- agent(A).
movable(A) :- truck(A).

% Rules with string id: time_past
% time_past/1:
time_past(A) :- clock(B),>(B,A).

% Rules with string id: tooFar
% tooFar/4:
tooFar(A,B,C,D) :- false.

% Rules with string id: do_sanction
% do_sanction/1:
do_sanction([not(A)|B]) :- retract(A),do_sanction(B).
do_sanction([A|B]) :- uniqueassertz(A),do_sanction(B).
do_sanction([])

% Rules with string id: do_reduce_health
% do_reduce_health/2:
do_reduce_health(A,B) :- @external(geoSenseMW,read(points(A,null,C),0.0),points(A,D,C)), is (E,-(C,B)),clock(now),@external(geoSenseMW,write(points(A,F,E),-1.0),G).

% Rules with string id: listTrue
% listTrue/1:
listTrue([A|B]) :- A,listTrue(B).
listTrue([])

% Rules with string id: @scheme
% @scheme/8:
@scheme(agent_directed(A,B,obligation(C,D,E)),(@countsas,norm(A,B,F,obligation(C,D,E)),F),false,(listTrue(C)),(time_past(D)),false,[plus(viol(agent_directed(A,B,obligation(C,D,E))))|[]],[plus(obey(agent_directed(A,B,obligation(C,D,E))))|[]])
@scheme(agent_directed(A,B,prohibition(C,D)),(@countsas,norm(A,B,E,prohibition(C,D)),E),(listTrue(C)),false,(false),false,[plus(viol(agent_directed(A,B,prohibition(C,D))))|[]],[plus(obey(agent_directed(A,B,prohibition(C,D))))|[]])
@scheme(@imply_rule(0.0),(@sanction,reduce(A,B),do_reduce_health(A,B),notifyAgent(A,changed(status))),true,false,false,false,[min(reduce(A,B))|[]],[])
@scheme(@imply_rule(1.0),(@sanction,viol(agent_directed(A,B,prohibition(C,D))),do_sanction(D)),true,false,false,false,[min(viol(agent_directed(A,B,prohibition(C,D))))|[]],[])
@scheme(@imply_rule(2.0),(@sanction,obey(agent_directed(A,B,C))),true,false,false,false,[min(obey(agent_directed(A,B,C)))|[]],[])

% Rules with string id: @ni
% @ni/3:
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(8.0,6.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(8.0,6.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,5.0)),prohibition([at(5.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(5.0,6.0)),prohibition([at(5.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,5.0)),prohibition([at(6.0,5.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(t1),t1,prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(@countsas,norm(enter_water(t1),t1,(truck(t1),water(6.0,6.0)),prohibition([at(6.0,6.0,t1)|[]],[reduce(t1,300.0)|[]])),(truck(t1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,5.0)),prohibition([coin(5.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(5.0,6.0)),prohibition([coin(5.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,5.0)),prohibition([coin(6.0,5.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a1),water(6.0,6.0)),prohibition([coin(6.0,6.0,a1)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,5.0)),prohibition([coin(5.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(5.0,6.0)),prohibition([coin(5.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,5.0)),prohibition([coin(6.0,5.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a2),water(6.0,6.0)),prohibition([coin(6.0,6.0,a2)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,5.0)),prohibition([coin(5.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(5.0,6.0)),prohibition([coin(5.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,5.0)),prohibition([coin(6.0,5.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(place_coin_water(c1),c1,prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(@countsas,norm(place_coin_water(c1),c1,(controller(c1),agent(a3),water(6.0,6.0)),prohibition([coin(6.0,6.0,a3)|[]],[reduce(c1,300.0)|[]])),(controller(c1),agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,6.0)),prohibition([at(5.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,5.0)),prohibition([at(6.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(6.0,6.0)),prohibition([at(6.0,6.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,5.0)),prohibition([at(5.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(5.0,6.0)),prohibition([at(5.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,5.0)),prohibition([at(6.0,5.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a2),a2,prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(@countsas,norm(enter_water(a2),a2,(agent(a2),water(6.0,6.0)),prohibition([at(6.0,6.0,a2)|[]],[reduce(a2,300.0)|[]])),(agent(a2),water(6.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,5.0)),prohibition([at(5.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(5.0,6.0)),prohibition([at(5.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(5.0,6.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,5.0)),prohibition([at(6.0,5.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,5.0))),keep)
@ni(agent_directed(enter_water(a3),a3,prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(@countsas,norm(enter_water(a3),a3,(agent(a3),water(6.0,6.0)),prohibition([at(6.0,6.0,a3)|[]],[reduce(a3,300.0)|[]])),(agent(a3),water(6.0,6.0))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(16.0,16.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(16.0,16.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a1),a1,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(@countsas,norm(collect_coin(a1),a1,(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a1,400.0)|[]])),(agent(a1),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a2),a2,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(@countsas,norm(collect_coin(a2),a2,(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a2,400.0)|[]])),(agent(a2),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(collect_coin(a3),a3,obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(@countsas,norm(collect_coin(a3),a3,(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0))),obligation([makeReading(2.0,2.0)|[]],20.0,[reduce(a3,400.0)|[]])),(agent(a3),coin(2.0,2.0),clock(0.0), is (20.0,+(0.0,20.0)))),keep)
@ni(agent_directed(enter_water(a1),a1,prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(@countsas,norm(enter_water(a1),a1,(agent(a1),water(5.0,5.0)),prohibition([at(5.0,5.0,a1)|[]],[reduce(a1,300.0)|[]])),(agent(a1),water(5.0,5.0))),keep)

% Rules with string id: @update
% @update/3:
@update((clock(A)),time(B),[min(clock(A)),plus(clock(B))|[]])
@update((true),time(A),[plus(clock(A))|[]])
@update((at(A,B,C)),position(C,cell(D,E),F),[min(at(A,B,C)),plus(at(D,E,C))|[]])
@update((true),position(A,cell(B,C),D),[plus(at(B,C,A))|[]])
@update((true),coin(cell(A,B),C,D),[plus(coin(A,B))|[]])

\end{lstlisting}

\end{document}
